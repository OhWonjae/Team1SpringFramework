<?xml version="1.0" encoding="euc-kr" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mycompany.webapp.dao.REVIEWDao">

   <select id="selectAll" resultType="review">
   	select REVIEW_ID, REVIEW_SCORE, REVIEW_TITLE, REVIEW_CONTENT, REVIEW_PHTOTO, REVIEW_DATE, P_ID, ORDER_ID, USER_ID
   	from REVIEW
   	order by REVIEW desc
   </select>
   
   <insert id="insert" parameterType="review">
    insert into QNA
    (REVIEW_ID, REVIEW_SCORE, REVIEW_TITLE, REVIEW_CONTENT, REVIEW_PHOTO,REVIEW_DATE)
    values
    (#{REVIEW_ID},#{REVIEW_SCORE},#{REVIEW_TITLE},#{REVIEW_CONTENT},#{REVIEW_PHOTO},#{REVIEW_DATE})
   </insert>
   
   <resultMap id="userResultMap" type="user">
   		<result column="user_name" property="uname"/>
   </resultMap>
   
   <select id="selectUser" resultType="review" resultMap="userResultMap">
   select u.user_id, u.user_name, u.dog_size
   from user
   where user_id=#{user_id}
   </select>
     
   <update id="update" parameterType="review">
   	update REVIEW set
   		REVIEW_SCORE=#{REVIEW_SCORE},
   		REVIEW_TITLE=#{REVIEW_TITLE},
   		REVIEW_CONTENT=#{REVIEW_CONTENT},
   		REVIEW_PHTOTO=#{REVIEW_PHTOTO},
   		REVIEW_DATE=#{REVIEW_DATE},
   	where REVIEW_ID=#{REVIEW_ID}
   </update>
   
   <delete id="deleteByREVIEW_ID" parameterType="int">
	   	delete from REVIEW
	   	where REVIEW_ID=#{REVIEW_ID}
	   	user_id=#{user_id}
   </delete>
   
</mapper>
